<script type="text/x-underscore-template" id="querybuilder-template">

    <div class="span12" id="querybuilder-area">

        <div class="row-fluid">

            <!-- choose ui flavor -->
            <div class="span6">

                <div id="querybuilder-flavor-chooser" class="btn-group btn-popover tabs"
                     data-toggle="popover" data-trigger="hover" data-placement="right"
                     data-content="Choose query interface"
                        >
                    <button class="btn active" data-toggle="tab"
                            href="#querybuilder-comfort-tab"
                            data-value="comfort">
                        <i class="icon-list"></i> Comfort
                    </button>
                    <!--
                    <button class="btn" data-toggle="tab"
                            href="#querybuilder-expert-tab"
                            data-value="expert">
                        Expert
                    </button>
                    -->
                    <button class="btn" data-toggle="tab"
                            href="#querybuilder-cql-tab"
                            data-value="cql">
                        <i class="icon-edit"></i> Expert
                    </button>

                    <!-- history -->
                    <div id="cql-history-chooser" class="btn-group2 hide" style2="display: inline">

                        <button
                                id="btn-query-history"
                                class="btn dropdown-toggle" data-toggle="dropdown"
                                >
                            <i class="icon-time btn-popover"
                               data-toggle="popover" data-trigger="hover" data-placement="top"
                               data-content="Query history"
                                    ></i>
                        </button>

                        <div id="cql-history-chooser-container" class="dropdown-menu pull-right2">
                            <div id="cql-history-chooser-select2" class="span12"></div>
                        </div>

                    </div>

                    <div class="btn-group">
                        <button class="btn dropdown-toggle hide" id="querybuilder-cql-actions" data-toggle="dropdown" data-value="cql">
                            <i class="icon-wrench"></i>
                        </button>
                        <ul class="dropdown-menu">

                            <li>

                                <!-- permalink -->
                                <a id="btn-query-permalink" href="#" target="_blank">
                                    <i class="icon-external-link"></i> Query permalink, with expiration time
                                </a>

                                <!-- content transformation -->
                                <a id="btn-query-transform">
                                    <i class="icon-exchange"></i> Transform query
                                </a>

                                <!-- clear -->
                                <a id="btn-query-clear">
                                    <i class="icon-trash"></i> Clear query
                                </a>

                            </li>
                        </ul>

                    </div>
                </div>

            </div>

            <!-- data source chooser -->
            <div class="span6">
                <div id="datasource" class="btn-group pull-right" data-toggle="buttons-radio">
                    <button class="btn active" data-value="ops">
                        <img src="/static/img/icons/epo-logo-small.svg" width="20" height="20"/> EPO
                    </button>
                    <button class="btn" data-value="depatisnet">
                        <img src="/static/img/icons/dpma-logo-small.svg" width="24" height="24"/> DPMA
                    </button>
                </div>
            </div>

        </div>

        <div class="row-fluid">

            <div class="span12 tab-content">

                <!-- trimmed-down user interface -->
                <div class="tab-pane fade in active" id="querybuilder-comfort-tab">

                    <form id="querybuilder-comfort-form">
                        <fieldset>

                            <div class="span6">

                                <!-- patent number -->
                                <div class="control-group">
                                    <div class="controls">
                                        <div class="input-prepend">
                                            <span class="add-on">Number</span>
                                            <input name="patentnumber" class="input-xlarge" placeholder="EP666666 or EP666667" type="text">
                                        </div>
                                    </div>
                                </div>

                                <!-- full text -->
                                <div class="control-group">
                                    <div class="controls">
                                        <div class="input-prepend">
                                            <span class="add-on">Full text</span>
                                            <input name="fulltext" class="input-xlarge" placeholder="rohr or tube or circular" type="text">
                                        </div>
                                    </div>
                                </div>

                                <!-- applicant -->
                                <div class="control-group">
                                    <div class="controls">
                                        <div class="input-prepend">
                                            <span class="add-on">Applicant</span>
                                            <input name="applicant" class="input-xlarge" placeholder="Siemens and Bosch" type="text">
                                        </div>
                                    </div>
                                </div>

                                <!-- inventor -->
                                <div class="control-group">
                                    <div class="controls">
                                        <div class="input-prepend">
                                            <span class="add-on">Inventor</span>
                                            <input name="inventor" class="input-xlarge" placeholder="Edison Thomas" type="text">
                                        </div>
                                    </div>
                                </div>

                            </div>

                            <div class="span6">

                                <!-- class -->
                                <div class="control-group">
                                    <div class="controls">
                                        <div class="input-prepend">
                                            <span class="add-on">Class</span>
                                            <input name="class" class="input-xlarge" placeholder="H04L12/433 or H04L12/24" type="text">
                                        </div>
                                    </div>
                                </div>

                                <!-- country -->
                                <div class="control-group">
                                    <div class="controls">
                                        <div class="input-prepend">
                                            <span class="add-on">Country</span>
                                            <input name="country" class="input-xlarge" placeholder="DE or EP or US" type="text">
                                        </div>
                                    </div>
                                </div>

                                <!-- publication date -->
                                <div class="control-group">
                                    <div class="controls">
                                        <div class="input-prepend">
                                            <span class="add-on">Publication</span>
                                            <input name="pubdate" class="input-xlarge" placeholder="&quot;within 1980,1985&quot;; &quot;1980-12-28&quot;; &quot;1999&quot;" type="text">
                                        </div>
                                    </div>
                                </div>

                                <!-- citation -->
                                <div class="control-group">
                                    <div class="controls">
                                        <div class="input-prepend">
                                            <span class="add-on">Citations</span>
                                            <input name="citation" class="input-xlarge" placeholder="EP666666" type="text">
                                        </div>
                                    </div>
                                </div>


                            </div>

                            <button type="submit" class="btn hide">Submit</button>
                        </fieldset>
                    </form>

                </div>

                <!-- jQuery QueryBuilder -->
                <div class="tab-pane fade" id="querybuilder-expert-tab">
                    Expert query builder on top of jQuery QueryBuilder
                </div>

                <!-- raw cql query string -->
                <div class="tab-pane fade" id="querybuilder-cql-tab">
                    <textarea class="span12" id="query" name="query" placeholder="CQL expression" rows="7"></textarea>
                </div>

            </div>


            <!-- quick builder -->
            <!--
            <div class="span1">

                <div id="cql-quick-operator" class="btn-group" data-toggle="buttons-radio">
                    <button class="btn-cql-boolean btn btn-mini active" type="button" data-value="OR">OR</button>
                    <button class="btn-cql-boolean btn btn-mini"        type="button" data-value="AND">AND</button>
                </div>

                <a class="btn-cql-field label label-success" data-value="num=">num=</a>
                <a class="btn-cql-field label label-info" data-value="txt=">txt=</a>
                <a class="btn-cql-field label label-important" data-value="cl=">cl=</a>

            </div>
            -->

        </div>

        <div class="row-fluid">

            <!-- send query to database -->
            <div class="span3">

                <div
                        class="btn-group btn-popover"
                        data-toggle="popover" data-trigger="hover" data-placement="right"
                        data-content="Send query to database"
                        >

                    <!-- activity indicator -->
                    <button type="submit" role="button" class="btn btn-query-perform">
                        <i class="idler icon-search"></i>
                        <i class="spinner icon-refresh icon-spin" style="display: none"></i>
                    </button>

                    <button type="submit" role="button" class="btn btn-query-perform">
                        Start search
                    </button>
                </div>

            </div>

            <!-- cql field symbol chooser -->
            <div class="span9">
                <div id="cql-field-chooser" name="cql-field-chooser" size="1"></div>
            </div>

        </div>

    </div>

</script>
