## -*- coding: utf-8 -*-
## (c) 2013-2016 Andreas Motl, Elmyra UG


<script id="backend-error-template" type="text/x-underscore-template">
<%text>

    <div class="alert alert-error alert-block alert-inline error-panel">
        <button type="button" class="close" data-dismiss="alert">&times;</button>
        <h4>ERROR</h4>

        <dl class="dl-horizontal dl-horizontal-biblio2">

            <dt>
                Description
            </dt>
            <dd>
                <% if (description['headers']['content-type'] == 'text/html') { %>
                The upstream data source responded with an error message in HTML:
                <br/><br/>
                <iframe id="error-iframe"><%= description['content'] || '&nbsp;' %></iframe>
                <% } else { %>
                <h4><%= description['content'] || '&nbsp;' %></h4>
                <% } %>
            </dd>

            <br/>

            <dt>
                Location
            </dt>
            <dd>
                <%= location || '&nbsp;' %>
            </dd>

            <dt>
                Name
            </dt>
            <dd>
                <%= name || '&nbsp;' %>
            </dd>

            <br/>

            <dt>
                Date
            </dt>
            <dd>
                <%= description['headers']['date'] || '&nbsp;' %>
            </dd>

            <dt>
                Status
            </dt>
            <dd>
                <%= description['status_code'] || '&nbsp;' %> <%= description['reason'] || '&nbsp;' %>
            </dd>

            <dt>
                URL
            </dt>
            <dd>
                <%= description['url'] || '&nbsp;' %>
            </dd>

        </dl>

        <span class="pull-right">
            <button
                    class="btn btn-danger report-issue-problem"
                    data-report-origin="document"
                    data-report-kind="not-available"
                    data-report-item="<%= name %> (<%= location %>)"
                    data-report-html=".error-panel"
                    data-dialog-remark="<%= _.string.dedent(_.string.strip(_.string.stripTags(description['content']))) %>"
                    >
                Report problem
            </button>
        </span>

        <span class="clearfix"/>

    </div>

</%text>
</script>


<script id="cornice-error-template" type="text/x-underscore-template">
<%text>

    <div class="alert alert-error alert-block alert-inline error-panel">
        <button type="button" class="close" data-dismiss="alert">&times;</button>
        <h4>ERROR</h4>

        <dl class="dl-horizontal dl-horizontal-biblio2">

            <dt>
                Description
            </dt>
            <dd>
                <h4><%= error.description %></h4>
            </dd>

            <br/>

            <dt>
                Location
            </dt>
            <dd>
                <%= error.location %>
            </dd>

            <dt>
                Name
            </dt>
            <dd>
                <%= error.name %>
            </dd>

            <% if (error.details) { %>
            <dt>
                Details
            </dt>
            <dd>
                <%= error.details %>
            </dd>
            <% } %>

        </dl>

        <span class="pull-right">
            <button
                    class="btn btn-danger report-issue-problem"
                    data-report-origin="document"
                    data-report-kind="not-available"
                    data-report-item="<%= error.name %> (<%= error.location %>)"
                    data-report-html=".error-panel"
                    data-dialog-remark-orig="<%= htmlentities(error.description) %>"
                    data-dialog-remark="<%= _.string.dedent(_.string.strip(_.string.stripTags(error.description))) %>"
                    >
                Report problem
            </button>
        </span>

        <span class="clearfix"/>

    </div>

</%text>
</script>


<script id="alert-template" type="text/x-underscore-template">
<%text>
    <div class="alert alert-block alert-inline <%= clazz %> user-alert">
        <button type="button" class="close" data-dismiss="alert">&times;</button>
        <h4><%= title %></h4>
        <br/>
        <%= description %>
    </div>
</%text>
</script>


<!-- modal dialog for viewing online help -->
<div id="help-modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="help-modal-label" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
        <h3 id="help-modal-label">Online help</h3>
    </div>
    <div class="modal-body" id="help-body">
        <a href="https://en.wikipedia.org/wiki/Contextual_Query_Language" target="_blank">About CQL</a>
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    </div>
</div>
