// (c) 2013,2014 Elmyra UG
function indicate_activity(e){e?($("#idler").hide(),$("#spinner").show()):($("#spinner").hide(),$("#idler").show())}function pdf_display(e,t,i){var n=new PDFObject({url:t+"?page="+i,id:"myPDF",pdfOpenParams:{navpanes:0,toolbar:0,statusbar:0,view:"FitB"}});n.embed(e)}function pdf_set_headline(e,t){var i=e+" Page "+t;$(".modal-header #ops-pdf-modal-label").empty().append(i)}function listview_bind_actions(){if(PRINTMODE)return void $(".do-not-print").hide();$(".page-size-chooser ul").each(function(){$(this).empty();var e=this,t=opsChooserApp.metadata.get("pagination_pagesize_choices"),i=opsChooserApp.metadata.get("page_size");_(t).map(function(t){var n="";n=t==i?'<i class="icon-check"></i>':'<i class="icon-check-empty"></i>';var a=_.template('<li><a href="" data-value="<%= pagesize %>"><%= icon %> <%= pagesize %></a></li>')({pagesize:t,icon:n});$(e).append(a)})}),$(".page-size-chooser a").click(function(){var e=$(this).data("value");return opsChooserApp.metadata.set("page_size",e),opsChooserApp.perform_search(),!1}),$(".pagination ul").each(function(){$(this).empty();var e=this,t=opsChooserApp.metadata.get("pagination_entry_count"),i=opsChooserApp.metadata.get("page_size");_.range(1,t*i,i).map(function(t){var n=t,a=n+i-1,o=n+"-"+a,r=_.template('<li><a href="" range="<%= range %>"><%= range %></a></li>')({range:o});$(e).append(r)})}),$(".pagination a").click(function(){var e=($(this).attr("action"),$(this).attr("range"));return opsChooserApp.perform_search({range:e}),!1}),$(".pagination").find("a").each(function(e,t){var i=$(t).attr("range");if(i==opsChooserApp.metadata.get("result_range")){var n=$(t).parent();n.addClass("active")}}),$(".cql-query").shorten({showChars:125,moreText:"more",lessText:"less"}),$(".chk-patent-number").click(function(){var e=this.value;this.checked&&opsChooserApp.basketModel.add(e),this.checked||opsChooserApp.basketModel.remove(e)}),$(".add-patent-number").click(function(){var e=$(this).data("patent-number");opsChooserApp.basketModel.add(e)}),$(".remove-patent-number").click(function(){var e=$(this).data("patent-number");opsChooserApp.basketModel.remove(e)}),$(".abstract").shorten({showChars:2e3,moreText:"more",lessText:"less"}),$(".add-patent-number").popover(),$(".remove-patent-number").popover(),$(".btn-popover").popover(),$(".inid-tooltip").tooltip(),$(".pdf-open").click(function(){var e=$(this).data("patent-number"),t=$(this).data("pdf-url"),i=1;pdf_set_headline(e,i),pdf_display("pdf",t,i),$("#pdf-previous").unbind(),$("#pdf-previous").click(function(){1!=i&&(i-=1,pdf_set_headline(e,i),pdf_display("pdf",t,i))}),$("#pdf-next").unbind(),$("#pdf-next").click(function(){i+=1,pdf_set_headline(e,i),pdf_display("pdf",t,i)})}),$(".query-link").click(function(e){e.preventDefault();var t=$(this).data("query-attribute"),i=$(this).data("query-value"),n=t+"="+i;opsChooserApp.send_query(n)}),$(".drawings-carousel").carousel({interval:null}),$(".drawings-carousel").bind("slid",function(){var e=$(this).closest(".ops-collection-entry"),t=$(this).data("carousel").getActiveIndex()+1;e.find(".drawing-number").text(t);var i=e.find(".drawings-carousel"),n=i.data("totalcount");n&&e.find(".drawing-totalcount").text("/"+n)});var e=$(".drawings-carousel .carousel-control.right");e.click(function(){var e=$(this).closest(".ops-collection-entry").find(".drawings-carousel"),t=e.find(".carousel-inner"),i=t.find("div.active").index()+1,n=t.find("div").length;if(i==n){var a=e.data("totalcount");if(!a){a=1;var o=e.closest(".ops-collection-entry").data("document-number");if(!o)return void console.warn("document-number could not be found, won't proceed loading items into carousel");var r=_.template("/api/ops/<%= patent %>/image/info")({patent:o});$.ajax({url:r,async:!1}).success(function(e){e&&(a=e.META["drawing-total-count"])}).error(function(e){console.warn("Error while fetching drawing count: "+e)}),e.data("totalcount",a)}if(a&&!(n>=a)){var c=$(t).children(":first").clone(),s=$(t).height();$(c).removeClass("active");var l=$(c).children("img"),p=l.attr("src").replace(/\?page=.*/,"");p+="?page="+(i+1),l.attr("src",p),$(c).attr("min-height",s),$(c).height(s),$(t).append(c)}}});var t=$(".drawings-carousel").find("img");t.error(function(){$(this).hide();var e='<br/><blockquote class="text-center" style="min-height: 300px"><br/><br/><br/><br/><br/><br/>No image</blockquote>';$(this).closest(".carousel").hide().parent().find(".drawing-info").html(e)}),$(".embed-item").each(function(e,t){var i=$(t).data("embed-url"),n=$(t).data("document-number");if(i){var a=_.template(i,null,{interpolate:/\{\{(.+?)\}\}/g}),o=a({publication_number:n}),r='<iframe src="'+o+'" class="container-fluid well" seamless="seamless" height2="200" width2="100%" style="min-height: 50%; min-width: 80%"/>';$(this).append(r)}})}function boot_application(){$(".pager-area").hide(),$("#pagination-info").hide(),$(".btn-query-perform").click(function(){opsChooserApp.perform_search()}),$(".btn-popover").popover(),$(".very-short").shorten({showChars:5,moreText:"more",lessText:"less"}),$("#query").caret($("#query").val().length),$("#query").on("keydown",null,"meta+return",function(){opsChooserApp.perform_search()}),$("#query").on("paste",function(e){if(!$(this).val()){e.preventDefault();var t=(e.originalEvent||e).clipboardData.getData("text");$("#clipboard-modifier-chooser").modal("show"),$(".btn-clipboard-modifier").click(function(){var e=$(this).data("modifier"),i=$("#clipboard-modifier-operator").find(".btn.active").data("value")||"OR";$("#clipboard-modifier-chooser").modal("hide");var n=_(t.split("\n")).map(function(t){return e+"="+t}).join(" "+i+" ");$("#query").val(n),$("#query").focus()})}}),$("#btn-query-clear").click(function(){$("#query").val("").focus()}),$(".btn-cql-boolean").button(),$("#cql-quick-operator").find(".btn-cql-boolean").click(function(){$("#query").focus()}),$(".btn-cql-field").click(function(){var e,t=$("#query").val(),i=$("#cql-quick-operator").find(".btn-cql-boolean.active").data("value"),n=$(this).data("value"),a=$("#query").caret(),o=!1,r=!0;if(0!=a){o=!0,e=t.substring(a-1,a),"="==e&&(o=!1,r=!1);var c=t.substring(a-5,a).toLowerCase();(_.string.include(c,"and")||_.string.include(c,"or"))&&(o=!1)}var s=e&&" "!=e?" ":"";o&&$("#query").caret(s+i),r&&$("#query").caret((o?" ":s)+n),$("#query").focus()}),$("#cql-field-chooser").select2({data:{results:OPS_CQL_FIELDS},dropdownCssClass:"bigdrop",escapeMarkup:function(e){return e}}),$("#cql-field-chooser").on("change",function(){var e=$(this).val();if(e){var t=$("#query").val(),i=$("#query").caret(),n=t.substring(i-1,i);"="!=n&&(" "!=n&&0!=i&&(e=" "+e),$("#query").caret(e+"="),$(this).data("select2").clear())}})}function to_list(e){return _.isArray(e)&&e||[e]}function cql_field_chooser_text(e,t,i){var n=_.template($("#cql-field-chooser-entry").html());t=t.map(function(e){return e+"="});var a=n({label:e,fields:t,more:i});return a}OpsChooserApp=Backbone.Marionette.Application.extend({perform_search:function(e){var t=$("#query").val();if(!_.isEmpty(t)){var i=this.metadata.get("page_size"),n="1-"+i,a=e&&e.range?e.range:n;opsChooserApp.search.perform(this.documents,this.metadata,t,a)}},send_query:function(e,t){e&&($("#query").val(e),opsChooserApp.perform_search(t),$(window).scrollTop(0))}}),opsChooserApp=new OpsChooserApp,opsChooserApp.addRegions({metadataRegion:"#ops-metadata-region",listRegion:"#ops-collection-region",paginationRegionTop:"#ops-pagination-region-top",paginationRegionBottom:"#ops-pagination-region-bottom"}),OpsExchangeDocumentView=Backbone.Marionette.ItemView.extend({template:_.template($("#ops-entry-template").html(),this.model,{variable:"data"}),tagName:"div",className:"row-fluid",events:{"click .rank_up img":"rankUp","click .rank_down img":"rankDown","click a.disqualify":"disqualify"},onDomRefresh:function(){var e=this.model.attributes.get_patent_number();opsChooserApp.collectionView.basket_update_ui_entry(e)}}),OpsExchangeDocumentCollectionView=Backbone.Marionette.CompositeView.extend({tagName:"div",id:"opsexchangedocumentcollection",className:"container",template:"#ops-collection-template",itemView:OpsExchangeDocumentView,appendHtml:function(e,t){$(e.el).append(t.el)},basket_update_ui_entry:function(e){var t=$("#basket").val(),i=$("#chk-patent-number-"+e),n=$("#add-patent-number-"+e),a=$("#remove-patent-number-"+e);_.string.include(t,e)?(i&&i.prop("checked",!0),n&&n.hide(),a&&a.show()):(i&&i.prop("checked",!1),n&&n.show(),a&&a.hide())}}),PaginationView=Backbone.Marionette.ItemView.extend({tagName:"div",template:"#ops-pagination-template",initialize:function(){this.listenTo(this.model,"change",this.render)},onDomRefresh:function(){}}),MetadataView=Backbone.Marionette.ItemView.extend({tagName:"div",template:"#ops-metadata-template",initialize:function(){this.listenTo(this.model,"change",this.render)},onDomRefresh:function(){}}),opsChooserApp.addInitializer(function(){this.search=new OpsPublishedDataSearch,this.metadata=new OpsExchangeMetadata,this.documents=new OpsExchangeDocumentCollection,this.basketModel=new BasketModel}),opsChooserApp.addInitializer(function(){this.metadataView=new MetadataView({model:this.metadata}),this.collectionView=new OpsExchangeDocumentCollectionView({collection:this.documents}),this.paginationViewTop=new PaginationView({model:this.metadata}),this.paginationViewBottom=new PaginationView({model:this.metadata});var e=new BasketView({el:$("#basket-area"),model:this.basketModel});e.render(),opsChooserApp.metadataRegion.show(this.metadataView),opsChooserApp.listRegion.show(this.collectionView),opsChooserApp.paginationRegionTop.show(this.paginationViewTop),opsChooserApp.paginationRegionBottom.show(this.paginationViewBottom)}),opsChooserApp.addInitializer(function(){this.listenTo(this.basketModel,"change:add",this.collectionView.basket_update_ui_entry),this.listenTo(this.basketModel,"change:remove",this.collectionView.basket_update_ui_entry)}),opsChooserApp.addInitializer(function(){this.perform_search()}),$(document).ready(function(){console.log("OpsChooserApp starting"),opsChooserApp.start(),boot_application()});var OPS_CQL_FIELDS=[{text:"<h4>Popular</h4>",children:[{id:"num",text:cql_field_chooser_text("Publication-, application- or<br/>priority number",["num"],"(10, 11, 21, 31)")},{id:"txt",text:cql_field_chooser_text("Title, abstract, inventor-, or applicant name",["txt"],"(54, 57, 72, 71, 73)")},{id:"cl",text:cql_field_chooser_text("CPC or IPC8 class",["cl"],"")}]},{text:"<h4>Publication</h4>",children:[{id:"pn",text:cql_field_chooser_text("Publication number",["pn","publicationnumber"],"(10, 11)")},{id:"pd",text:cql_field_chooser_text("Publication date",["pd","publicationdate"],"")},{id:"pa",text:cql_field_chooser_text("Applicant",["pa","applicant"],"(71, 73)")},{id:"in",text:cql_field_chooser_text("Inventor",["in","inventor"],"(72)")},{id:"ia",text:cql_field_chooser_text("Inventor or applicant",["ia","inventorandapplicant"],"(72, 71, 73)")},{id:"spn",text:cql_field_chooser_text("Publication number<br/><small>in epodoc format</small>",["spn"],"")}]},{text:"<h4>Text</h4>",children:[{id:"ti",text:cql_field_chooser_text("Title",["ti","title"],"(54)")},{id:"ab",text:cql_field_chooser_text("Abstract",["ab","abstract"],"(57)")},{id:"ta",text:cql_field_chooser_text("Title or abstract",["ta","titleandabstract"],"(54, 57)")},{id:"txt",text:cql_field_chooser_text("Title, abstract, inventor-, or applicant name",["txt"],"(54, 57, 72, 71, 73)")}]},{text:"<h4>Application, priority and family</h4>",children:[{id:"ap",text:cql_field_chooser_text("Application number",["ap","applicantnumber"],"(21)")},{id:"sap",text:cql_field_chooser_text("Application number<br/><small>in epodoc format</small>",["sap"],"")},{id:"pr",text:cql_field_chooser_text("Priority number",["pr","prioritynumber"],"(31)")},{id:"spr",text:cql_field_chooser_text("Priority number<br/><small>in epodoc format</small>",["spr"],"")},{id:"famn",text:cql_field_chooser_text("Family identifier (simple)",["famn"],"")}]},{text:"<h4>Classification</h4>",children:[{id:"cpc",text:cql_field_chooser_text("CPC classification<br/><small>(invention and additional)</small>",["cpc","cpci","cpca"],"")},{id:"ipc",text:cql_field_chooser_text("IPC8 class",["ipc","ic"],"")},{id:"ci",text:cql_field_chooser_text("IPC8 core invention class",["ci"],"")},{id:"cn",text:cql_field_chooser_text("IPC8 core additional class<br/><small>(non-invention)</small>",["cn"],"")},{id:"ai",text:cql_field_chooser_text("IPC8 advanced invention class",["ai"],"")},{id:"an",text:cql_field_chooser_text("IPC8 advanced additional class<br/><small>(non-invention)</small>",["an"],"")},{id:"a",text:cql_field_chooser_text("IPC8 advanced class",["a"],"")},{id:"c",text:cql_field_chooser_text("IPC8 core class",["c"],"")},{id:"cl",text:cql_field_chooser_text("CPC or IPC8 class",["cl"],"")}]},{text:"<h4>Citations</h4>",children:[{id:"ct",text:cql_field_chooser_text("Cited document number",["ct","citation"],"(56)")},{id:"ex",text:cql_field_chooser_text("Cited document number<br/><small>during examination</small>",["ex"],"")},{id:"op",text:cql_field_chooser_text("Cited document number<br/><small>during opposition</small>",["op"],"")},{id:"rf",text:cql_field_chooser_text("Cited document number<br/><small>provided by applicant</small>",["rf"],"")},{id:"oc",text:cql_field_chooser_text("Another cited document number",["oc"],"")}]}];BasketModel=Backbone.Model.extend({defaults:{numberlist:[],ship_url:"",ship_param:"payload"},initialize:function(){console.log("BasketModel::initialize");var e=["numberlist","ship-url","ship-param"],t=this,i=$.url(window.location.href);_(e).each(function(e){var n=i.param(e),a=e.replace("-","_");n&&(n=decodeURIComponent(n),n=n.split(","),t.set(a,n))})},add:function(e){var t=this.get("numberlist");_(t).contains(e)||(t.push(e),this.trigger("change",this),this.trigger("change:add",e))},remove:function(e){var t=this.get("numberlist");_(t).contains(e)&&(t.pop(e),this.trigger("change",this),this.trigger("change:remove",e))}}),BasketView=Backbone.Marionette.ItemView.extend({template:"#basket-template",initialize:function(){console.log("BasketView::initialize"),this.listenTo(this.model,"change",this.render),this.listenTo(this,"item:rendered",this.setup)},serializeData:function(){var e={};e=this.model.toJSON();var t=this.model.get("numberlist");return t&&(e.numberlist=t.join("\n")),e},setup:function(){$("#basket-review-button").click(function(){var e=$("#basket").val(),t=e.split("\n").filter(function(e){return e}).map(function(e){return"pn="+e}).join(" OR ");t&&($("#query").val(t),opsChooserApp.perform_search())})},onDomRefresh:function(){console.log("BasketView::onDomRefresh")}}),OpsPublishedDataSearch=Backbone.Model.extend({url:"/api/ops/published-data/search",perform:function(e,t,i,n){indicate_activity(!0),e.reset(),$(opsChooserApp.paginationViewBottom.el).hide();this.fetch({data:$.param({query:i,range:n}),success:function(i){indicate_activity(!1),$("#alert-area").empty(),$(".pager-area").show(),console.log("payload data:"),console.log(i.attributes);var n,a=i.attributes["ops:world-patent-data"]["ops:biblio-search"]["ops:search-result"];if(a){$(opsChooserApp.paginationViewBottom.el).show();var o=to_list(a["exchange-documents"]);n=_.map(o,function(e){return new OpsExchangeDocument(e["exchange-document"])})}e.reset(n);var r=i.attributes["ops:world-patent-data"]["ops:biblio-search"],c=r["@total-result-count"],s=r["ops:range"],l=s["@begin"]+"-"+s["@end"],p=r["ops:query"].$;t.set({result_count:c,result_range:l,query_real:p}),listview_bind_actions()},error:function(t,i){indicate_activity(!1),$("#alert-area").empty(),e.reset(),response=jQuery.parseJSON(i.responseText),"error"==response.status&&(_.each(response.errors,function(e){var t=_.template($("#backend-error-template").html()),i=t(e);$("#alert-area").append(i)}),$(".very-short").shorten({showChars:0,moreText:"more",lessText:"less"}))}})}}),OpsExchangeMetadata=Backbone.Model.extend({defaults:{page_size:25,result_count:null,result_range:null,query_real:null,pagination_entry_count:11,pagination_pagesize_choices:[25,50,75,100],get_url:function(){var e=window.location.pathname+"?query="+encodeURIComponent($("#query").val())+"&pagesize="+this.page_size;return e},get_url_print:function(){return this.get_url()+"&print=true"},get_url_pdf:function(){return this.get_url()+"&pdf=true"}},initialize:function(){var e=$.url(window.location.href),t=e.param("pagesize");t&&this.set("page_size",parseInt(t))}}),OpsExchangeDocument=Backbone.Model.extend({defaults:{selected:!1,get_patent_number:function(){return this["@country"]+this["@doc-number"]+this["@kind"]},_flatten_textstrings:function(e){var t={};return _(e).each(function(e,i){if("@document-id-type"==i?i="type":"doc-number"==i&&(i="number"),"object"==typeof e){var n=e.$;n&&(e=n)}t[i]=e}),t},get_publication_reference:function(e){var t=this["bibliographic-data"]["publication-reference"]["document-id"],i=_(t).find(function(t){return t["@document-id-type"]==e});return this._flatten_textstrings(i)},get_application_reference:function(e){var t=this["bibliographic-data"]["application-reference"]["document-id"],i=_(t).find(function(t){return t["@document-id-type"]==e});return this._flatten_textstrings(i)},get_applicants:function(e){try{var t=this["bibliographic-data"].parties.applicants}catch(i){return[]}t=t||[];var n=t.applicant,a=this.parties_to_list(n,"applicant-name");return e&&(a=this.enrich_links(a,"applicant")),a},get_inventors:function(e){try{var t=this["bibliographic-data"].parties.inventors}catch(i){return[]}t=t||[];var n=t.inventor,a=this.parties_to_list(n,"inventor-name");return e&&(a=this.enrich_links(a,"inventor")),a},parties_to_list:function(e,t){var i="0",n={};_.each(e,function(e){var a=e["@data-format"],o=e["@sequence"],r=_.string.trim(e[t].name.$,", ");n[a]=n[a]||{},n[a][o]=r,o>i&&(i=o)});var a=[];return _.each(_.range(1,parseInt(i)+1),function(e){e=e.toString();var t=(n.epodoc[e],n.original[e]);a.push(t)}),a},get_ipc_list:function(e){var t=[],i=this["bibliographic-data"]["classifications-ipcr"];if(i){var n=to_list(i["classification-ipcr"]);t=_.map(n,function(e){return e.text.$})}return e&&(t=this.enrich_links(t,"ipc",function(e){return e.substring(0,15).replace(/ /g,"")})),t},enrich_links:function(e,t,i){var n=this;return _.map(e,function(e){return n.enrich_link(e,t,e,i)})},enrich_link:function(e,t,i,n){if(i||(i=e),PRINTMODE)return i;var a="external",o="_blank",r=null;n&&(i=n(i)),_.string.include(i," ")&&(i='"'+i+'"');var c;if("internal"==a?c=_.template('<a class="query-link" href="" data-query-attribute="<%= attribute %>" data-query-value="<%= value %>"><%= label %></a>'):"external"==a&&(r=encodeURIComponent(t+"="+i),c=_.template('<a href="?query=<%= query %>" target="<%= target %>" class="incognito"><%= label %></a>')),c){var s=c({label:e,attribute:t,value:i,target:o,query:r});return s}},_find_document_number:function(e,t){for(i in e){var n=e[i];if(n["@document-id-type"]==t){var a=(n.country?n.country.$:"")+(n["doc-number"]?n["doc-number"].$:"")+(n.kind?n.kind.$:"");return a}}},get_patent_citation_list:function(e){var t=this,i=[],n=this["bibliographic-data"]["references-cited"];if(n){var a=to_list(n.citation);i=a.filter(function(e){return e.patcit}).map(function(e){return t._find_document_number(e.patcit["document-id"],"docdb")})}return e&&(i=this.enrich_links(i,"pn")),i},_expand_links:function(e){var t=/(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/g;return _(e.match(t)).each(function(t){e=e.replace(t,'<a href="'+t+'" target="_blank">'+t+"</a>")}),e},get_npl_citation_list:function(){var e=this,t=[],i=this["bibliographic-data"]["references-cited"];if(i){var n=to_list(i.citation);t=n.filter(function(e){return e.nplcit}).map(function(e){return e.nplcit.text.$}).map(e._expand_links)}return t},get_drawing_url:function(){var e=_.template("/api/drawing/<%= patent_number %>"),t=e({patent_number:this.get_patent_number()});return t},get_fullimage_url:function(){var e=_.template("/api/ops/<%= patent_number %>/image/full"),t=e({patent_number:this.get_patent_number()});return t},get_espacenet_pdf_url:function(){var e=_.template("http://worldwide.espacenet.com/espacenetDocument.pdf?flavour=trueFull&FT=D&CC=<%= country %>&NR=<%= docnumber %><%= kind %>&KC=<%= kind %>"),t=e({country:this["@country"],docnumber:this["@doc-number"],kind:this["@kind"]});return t},get_ops_pdf_url:function(){var e=_.template("/api/ops/<%= country %><%= docnumber %><%= kind %>/pdf/all"),t=e({country:this["@country"],docnumber:this["@doc-number"],kind:this["@kind"]});return t},get_epo_register_url:function(){var e=this.get_application_reference("docdb"),t=_.template("https://register.epo.org/application?number=<%= country %><%= number %>"),i=t(e);return i},get_inpadoc_legal_url:function(){var e=_.template("http://worldwide.espacenet.com/publicationDetails/inpadoc?FT=D&CC=<%= country %>&NR=<%= docnumber %><%= kind %>&KC=<%= kind %>"),t=e({country:this["@country"],docnumber:this["@doc-number"],kind:this["@kind"]});return t},get_dpma_register_url:function(){var e=this.get_application_reference("docdb"),t=_.template("/office/dpma/register/application/<%= country %><%= number %>?redirect=true"),i=t(e);return i},get_uspto_pair_url:function(){var e=_.template("http://portal.uspto.gov/pair/PublicPair"),t=e({country:this["@country"],docnumber:this["@doc-number"],kind:this["@kind"]});return t},get_inpadoc_family_url:function(){var e=_.template("http://worldwide.espacenet.com/publicationDetails/inpadocPatentFamily?FT=D&CC=<%= country %>&NR=<%= docnumber %><%= kind %>&KC=<%= kind %>"),t=e({country:this["@country"],docnumber:this["@doc-number"],kind:this["@kind"]});return t},get_ops_family_url:function(){var e=_.template("http://ops.epo.org/3.0/rest-services/family/publication/docdb/<%= country %>.<%= docnumber %>.<%= kind %>/biblio,legal"),t=e({country:this["@country"],docnumber:this["@doc-number"],kind:this["@kind"]});return t},get_ccd_viewer_url:function(){var e=this.get_application_reference("epodoc"),t=_.template("http://ccd.fiveipoffices.org/CCD-2.0.4/html/viewCcd.html?num=<%= number %>&type=application&format=epodoc"),i=t(e);return i},get_depatisnet_url:function(){var e=this.get_publication_reference("docdb"),t=_.template("https://depatisnet.dpma.de/DepatisNet/depatisnet?action=bibdat&docid=<%= country %><%= number %><%= kind %>"),i=t(e);return i}},select:function(){this.set("selected",!0)},unselect:function(){this.set("selected",!1)}}),OpsExchangeDocumentCollection=Backbone.Collection.extend({model:OpsExchangeDocument,initialize:function(){}});
//# sourceMappingURL=/static/js/app.min.map