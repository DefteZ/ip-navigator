// (c) 2013,2014 Elmyra UG - All rights reserved
IpsuiteNavigatorConfig=Backbone.Model.extend({defaults:{mode:void 0,context:"default",project:"ad-hoc",datasource:"ops","ship-param":"payload"},initialize:function(t){var a=this;t=t||{},this._originalAttributes=_.clone(this.attributes),_.each(_.keys(t),function(e){var i=t[e];i&&a.set(e,i)}),this.uri=$.url(window.location.href),this.update_baseurl()},update_baseurl:function(){var t=this.uri,a=t.attr("protocol")+"://"+t.attr("host");t.attr("port")&&(a+=":"+t.attr("port")),a+=t.attr("path"),this.set("baseurl",a)},history_pushstate:function(){var t=this.uri.param(),a={mode:this.get("mode"),context:this.get("context"),project:this.get("project"),datasource:this.get("datasource")};this.uri.param("op")||_.each(a,function(a,e){this._originalAttributes[e]!=a&&(t[e]=a)},this),_.each(t,function(a,e){_.isEmpty(a)&&delete t[e]}),history.pushState({id:"url-clean"},"","?"+jQuery.param(t))}});