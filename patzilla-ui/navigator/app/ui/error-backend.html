<%
// -*- coding: utf-8 -*-
// (c) 2013-2016 Andreas Motl, Elmyra UG
%>

<div class="alert alert-error alert-block alert-inline error-panel">
    <button type="button" class="close" data-dismiss="alert">&times;</button>
    <h4>ERROR</h4>

    <dl class="dl-horizontal dl-horizontal-biblio2">

        <dt>
            Description
        </dt>
        <dd>
            <% if (error.description['headers']['content-type'] == 'text/html') { %>
            The upstream data source responded with an error message in HTML:
            <br/><br/>
            <iframe id="error-iframe"><%= error.description['content'] || '&nbsp;' %></iframe>
            <% } else { %>
            <h4><%= error.description['content'] || '&nbsp;' %></h4>
            <% } %>
        </dd>

        <br/>

        <dt>
            Location
        </dt>
        <dd>
            <%= error.location || '&nbsp;' %>
        </dd>

        <dt>
            Name
        </dt>
        <dd>
            <%= error.name || '&nbsp;' %>
        </dd>

        <br/>

        <dt>
            Date
        </dt>
        <dd>
            <%= error.description['headers']['date'] || '&nbsp;' %>
        </dd>

        <dt>
            Status
        </dt>
        <dd>
            <%= error.description['status_code'] || '&nbsp;' %> <%= error.description['reason'] || '&nbsp;' %>
        </dd>

        <dt>
            URL
        </dt>
        <dd>
            <%= error.description['url'] || '&nbsp;' %>
        </dd>

    </dl>

        <span class="pull-right">
            <button
                    class="btn btn-danger report-issue-problem"
                    data-report-origin="document"
                    data-report-kind="not-available"
                    data-report-item="<%= error.name %> (<%= error.location %>)"
                    data-report-html=".error-panel"
                    data-dialog-remark="<%= htmlentities(error.description.content) %>"
                    >
                Report problem
            </button>
        </span>

    <span class="clearfix"/>

</div>
